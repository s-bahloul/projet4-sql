hl_key="95b9740b-d129-4677-9fa8-88c8a7d34a2b",hl_api="d.eu.criteo.com",hl_beam="b.criteo.com",hl_debug=!(hl_cid=310),hl_channel="web",hl_use_viewability="True",hl_ext={resv:"9de7b67c-dc74-49d5-8191-0848f0e2d596",stylespath:"//static.criteo.net/cbs/prod/v1/ClientPaths","library:oninit":function(e){e.setCulture("fr-FR")},plugins:{Utility:{source:function(f,e){var a,y;function v(){return a.getProperty("view")||"grid"}function o(e){return"list"===e?$(".Article-item"):$(".Article-mosaicItem")}function s(){return $(".mini-FA")}function t(e){for(var t,r,n=document.querySelectorAll("[data-hl-beacon]"),i={top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth},o=0;o<n.length;++o){null!=n[o].getAttribute("data-hl-beacon-state")&&"ready"!=n[o].getAttribute("data-hl-beacon-state")||(t=f.getPosition(n[o]),e&&(r=$(n[o]).position().left,t.left=r,t.right=r+n[o].offsetWidth),f.isInView(i,t)&&"none"!=$(n[o]).css("display")&&(f.dropBeacon(n[o].getAttribute("data-hl-beacon")),n[o].setAttribute("data-hl-beacon-state","sent")))}}return{initialize:function(e,t){a=e,y=t},createRequests:function(e,t,r,n,i){for(var o,a,s,l=v(),c=(a=i,s={},(o=l)&&(s.searchType="list"===o?"list":"mosaic"),"web"===a&&window.hasOwnProperty("FnacAnalytics")&&window.FnacAnalytics.hasOwnProperty("page_name")?s.trackingzone=encodeURIComponent(window.FnacAnalytics.page_name):s.trackingzone="Home_Accueil",s),d=[],u=0;u<e.length;u+=t){for(var p=[],h=u;h<t+u&&h<e.length;h++)p.push(e[h].ProductSKU);var m=$.extend({},c,{references:p.join(r)}),g=n?decodeURIComponent(f.toUrl(y,m)):f.toUrl(y,m);d.push(g)}return d},appendFnacClass:function(e){var t=v();$(e).addClass({list:"clearfix js-Hooklogic-ArticleItem Article-item Article-item--sponsor",grid:"Article-mosaicItem itemosaic js-Hooklogic-Thumbnail"}[t])},appendFnacClassMobile:function(e){$(e).addClass("mini-FA")},injectHookLogicDivs:function(t){t=t||!1;var r=new $.Deferred,n=v(),i=window.setInterval(function(){var e=t?s():o(n);5<=e.length&&(window.clearInterval(i),t?($('<article id = "hl_1"></div>').insertAfter(e[1]),$('<article id = "hl_2"></div>').insertAfter(e[3])):($('<li id = "hl_1"></div>').insertAfter(e[1]),$('<li id = "hl_2"></div>').insertAfter(e[3])),$("#hl_1, #hl_2").append('<div class="hl-product"></div>'),r.resolve())},200);return r},isValidToHitFnacAPIForSearch:function(e,t){var r=[];return r=(t=t||!1)?s():o(v()),e.length&&5<r.length},getAdForSkuId:function(e,t){for(var r=0,n=e.length;r<n;r++)if(-1!==e[r].ProductSKU.indexOf(t))return e[r]},getTrackingStringForAd:function(e,t,r){var n=a.getProperty("hlpt"),i={P:this.getPagenameFromResponse(r),S:"Résultat recherche",H:"Home Géné",M:{Informatique:"Informatique","Jeux Video Consoles":"Jeux video","Kids, Jouets, bebe":"Enfants, jouets","Photo, camescope":"Son, Casques, Hifi, Ipod","Son, Casques, Hifi, Ipod":"TV, Vidéo, Home cinema","TV, Video, Home Cine":"TV, Vidéo, Home cinema","Maison & Cuisine":"Maison, Electroménager","Smartphones & Objets connectés":"Smartphones et Objets Connectés"}},o=e.ProductSKU.replace("1-","");return"#int=S:HookLogic|"+("string"==typeof i[n]?i[n]:i[n][a.getProperty("taxonomy")])+"|NonApplicable|"+o+"|BL"+t.toString()+"|L1"},setTrackingStringForAd:function(e,t,r){r=r||!1;var n=v(),i={list:".Article-desc a",grid:".thumbnail-title a"},o="",o=r?".title a":i[n],a=t.find(o).attr("href"),s=f.urlParse(a);t.find(i[n]).attr("href",s.page+e)},addClickHandlers:function(e,t,r,n){n=n||!1;for(var i,o="",a={list:[".js-ProductBuy a.addToBasket",".Article-desc a"],grid:[".thumbnail-title a",".js-ProductBuy-add"],mobileSearchList:[".simpleCarousel-element"]},s=0,l=a[o=(r=r||!1)?"mobileSearchList":v()].length;s<l;s++){(i=n?e:e.find(a[o][s])).click(function(){f.dropBeacon(t.ClickBeacon),(r||n)&&(window.location.href=i.attr("hl-hyperlink"))})}},addProductPageRedirect:function(e,t){"grid"!==v()&&e.find(".Article-itemVisual").click(function(){window.location=t.ProductPage})},getSkuIdFromResponse:function(e){return e.querySelector({grid:".thumbnail-content",list:".js-ProductBuy"}[v()]).getAttribute("data-product-id")},getSkuIdFromResponseMobile:function(e){var t=e.getAttribute("data-hyperlink").match(/http(s)?:\/\/[\w.-]*\/([\w.-]*)\/([\w\d]*)/);return("a"===t[2][0]&&/^\d+$/.test(t[2].slice(1))?t[2]:t[3]).replace("a","1-")},removeFnacRedirect:function(e){var t=e.getAttribute("data-hyperlink");e.setAttribute("hl-hyperlink",t),e.removeAttribute("data-hyperlink")},getPagenameFromResponse:function(e){if(e){var t=e.querySelector(".thumbnail-content.js-ProductBuy")||e.querySelector(".thumbnail-content.js-article-thumbnail");if(t)return t.getAttribute("data-pagename")}},getAdsFromResponse:function(e,t){var r=e.split(t);return r.slice(1,r.length-1).map(function(e){return f.toDom(e)})},sendInsufficientAdsRequest:function(){a.setProperty("ashown","none").submit()},addViewabilityToFnacCarousel:function(){$("#hl_1 .Carousel-arrow").click(function(){setTimeout(function(){t()},800)})},addViewabilityOnResize:function(){t()},addViewabilityToFnacMobileCarousel:function(){window.addEventListener("touchmove",function(){setTimeout(function(){t(!0)},800)})},instantiateListingModule:function(){"list"===v()?Fnac.Services.instantiateService.articleItem(".js-Hooklogic-ArticleItem"):Fnac.Services.instantiateService.thumbnail(".js-Hooklogic-Thumbnail")},removeLazyLoading:function(e){var t,r,n,i=a.getProperty("hlpt");"S"!==i&&"B"!==i||(t=e.find("img").eq(0),r={grid:"data-lazyimage-background",list:"data-lazyimage"}[v()],t.removeClass("js-LazyImage"),n=t.attr(r),t.removeAttr(r),"grid"===v()?t.css("background-image",'url("'+n+'")'):t.attr("src",n))},fireOrganicSkusBeacon:function(){var e=f.newOrganicUpdate();window.setTimeout(function(){e.setProperty("skuid",$("#dontTouchThisDiv .js-ProductBuy").map(function(e,t){return"1-"+t.getAttribute("data-product-id")}).toArray().join("|")),e.submit()},5e3)}}},data:null}},"request.homepage:properties":{minmes:5,maxmes:20,creative:"1660x590_M-C-BG_TI-5_10_Home",beacon:"individual"},"request.homepage:onprerender":function(d,u,p,e){if(-1<window.location.href.toLowerCase().indexOf("dyson"))return d.setAttribute("coveragecode","O");var i,h,m,t=location.hostname+"/api/navigation/rest/v1/thumbnail/suggestions/category";u.Utility.initialize(d,t),"none"!==d.getProperty("ashown")&&0!==p.length&&($("#hl_1").length?(i=u.Utility.createRequests(p,10,"&references=",!0,d.getProperty("platform")),m=!(h=[]),$.ajax({url:i[0],dataType:"html"}).done(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((h=u.Utility.getAdsFromResponse(e,n))<5)return i[1]?(m=!0,$.ajax({url:i[1],dataType:"html"})):void u.Utility.sendInsufficientAdsRequest()}).done(function(e,t,r){if(1==m){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((h=h.concat(u.Utility.getAdsFromResponse(e,n))).length<5)return void u.Utility.sendInsufficientAdsRequest()}h=h.slice(0,Math.min(10,h.length)),$("#hl_1").append('<section class="js-Hooklogic-Carousel strate Carousel--sponsor Carousel--outsideNav strate-altGrey"> <div class="clearfix Strate-top"><h2 class="Strate-title ">À NE PAS RATER</h2></div><div class="Carousel js-Carousel"> <div class="Carousel-overflowContainer Carousel-overflowContainer--noMargin"> <div id = "hl-Carousel" class="Carousel-container js-Carousel-container"> &lt;!--vignettes a mettre ici--&gt;</div></div><button class="Carousel-arrow Carousel-arrow--left js-Carousel-previous" disabled=""> <i class="icon icon_i_057_arrow_left_01"></i> </button><button class="Carousel-arrow Carousel-arrow--right js-Carousel-next"> <i class="icon icon_i_055_arrow_right_01"></i> </button></div><span class="thumbnail-sponsor js-sponsorTooltip" data-placement="right" data-original-title="Ce produit en vente sur fnac.com est mis en avant par nos partenaires">sponsoris&eacute; <i class="icon icon_i_081_HelpBis"></i></span> </section>');for(var i=0,o=h.length;i<o;i++){var a,s=h[i][1]||h[i][0],l=u.Utility.getSkuIdFromResponse(s),c=u.Utility.getAdForSkuId(p,l);c&&($(h[i]).addClass("hl-beacon-impression"),$(h[i]).attr("data-hl-beacon",c.ImpBeacon),$("#hl-Carousel").append(h[i]),a=u.Utility.getTrackingStringForAd(c,i+1,s),u.Utility.setTrackingStringForAd(a,$(s)),u.Utility.addClickHandlers($(s),c))}u.Utility.addViewabilityToFnacCarousel(),Fnac.Services.instantiateService.carousel(".js-Hooklogic-Carousel"),d.setScrollEventListener("hl-beacon-impression")}).fail(function(){u.Utility.sendInsufficientAdsRequest()})):d.setAttribute("coveragecode","O"))},"request.homepage:treatment":function(e,t){return'<div class="hl-product" hl-product-url="'+t.ProductPage+'"></div>'},"request.mobilehomepage:properties":{minmes:2,maxmes:20,creative:"1660x590_M-C-BG_TI-5_10_MobileHome",beacon:"individual"},"request.mobilehomepage:onprerender":function(c,d,u,e){if(-1<window.location.href.toLowerCase().indexOf("dyson"))return c.setAttribute("coveragecode","O");var i,p,h,t=location.hostname+"/api/navigation/rest/v1/thumbnail/suggestions/category";d.Utility.initialize(c,t),"none"!==c.getProperty("ashown")&&0!==u.length&&($("#hl_1").length?(i=d.Utility.createRequests(u,10,"&references=",!0,c.getProperty("platform")),h=!(p=[]),$.ajax({url:i[0]+"&mobile=1",dataType:"html"}).done(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=d.Utility.getAdsFromResponse(e,n))<5)return i[1]?(h=!0,$.ajax({url:i[1],dataType:"html"})):void d.Utility.sendInsufficientAdsRequest()}).done(function(e,t,r){if(1==h){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=p.concat(d.Utility.getAdsFromResponse(e,n))).length<5)return void d.Utility.sendInsufficientAdsRequest()}p=p.slice(0,Math.min(10,p.length)),$("#hl_1").append('<div class="Home-sponsor"><header class="title"><span>A Ne Pas Rater</span></header><div class="Home-sponsor-wrapper"><div class="container"><div id="hl-carousel" class="hl_1-carousel simpleCarousel">\x3c!-- Append products thumbnails here --\x3e</div></div><span class="thumbnail-sponsor">sponsorisé</span></div></div>');for(var i=0,o=p.length;i<o;i++){var a=p[i][1]||p[i][0],s=d.Utility.getSkuIdFromResponseMobile(a),l=d.Utility.getAdForSkuId(u,s);l&&($(p[i]).addClass("hl-beacon-impression"),$(p[i]).attr("data-hl-beacon",l.ImpBeacon),$("#hl-carousel").append(p[i]),d.Utility.removeFnacRedirect(a),d.Utility.addClickHandlers($(a),l,!1,!0),d.Utility.addProductPageRedirect($(a),l))}d.Utility.addViewabilityToFnacMobileCarousel(),c.setScrollEventListener("hl-beacon-impression")}).fail(function(){d.Utility.sendInsufficientAdsRequest()})):c.setAttribute("coveragecode","O"))},"request.mobilehomepage:treatment":"request.homepage:treatment","request.mobilesearch:properties":{minmes:2,maxmes:10,creative:"1700x275_M-C-IG_TI-1_2_MobileSearch",beacon:"individual"},"request.mobilesearch:onprerender":function(a,s,l,e){if(-1<window.location.href.toLowerCase().indexOf("dyson"))return a.setAttribute("coveragecode","O");$("#hl_1, #hl_2").remove();var o,c,d,t="//"+location.host+"/api/search/v1/suggestions";s.Utility.initialize(a,t),"none"!==a.getProperty("ashown")&&0!==l.length&&(s.Utility.isValidToHitFnacAPIForSearch(l,!0)?(o=s.Utility.createRequests(l,5,";",!1,a.getProperty("platform")),c=[],d=![],$.ajax({url:o[0]+"&mobile=1",dataType:"html"}).then(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((c=s.Utility.getAdsFromResponse(e,n)).length<2){if(o[1])return d=!0,$.ajax({url:o[1],dataType:"html"});var i=new $.Deferred;return i.reject(),i}}).then(function(e,t,r){if($("#hl_1, #hl_2").remove(),1!=d)return c=c.slice(0,2),s.Utility.injectHookLogicDivs(!0);var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((c=c.concat(s.Utility.getAdsFromResponse(e,n))).length<2){var i=new $.Deferred;return i.reject(),i}}).then(function(){s.Utility.appendFnacClassMobile("#hl_1, #hl_2"),$("#hl_1, #hl_2").addClass("js-hl-service mini-FA--sponsor");for(var e=0,t=c.length;e<t;e++){var r=s.Utility.getSkuIdFromResponseMobile(c[e][0]),n=s.Utility.getAdForSkuId(l,r);s.Utility.removeFnacRedirect(c[e][0]);var i=$(".hl-product").eq(e);i.addClass("hl-beacon-impression"),i.attr("data-hl-beacon",n.ImpBeacon),i.append(c[e]),s.Utility.removeLazyLoading(i),i.children(".thumbnail.js-ProductThumbnail").addClass("thumbnail--sponsor");var o=s.Utility.getTrackingStringForAd(n,e+1);s.Utility.setTrackingStringForAd(o,i,!0),s.Utility.addClickHandlers(i,n,!0),s.Utility.addProductPageRedirect(i,n)}$("#hl_1, #hl_2").append('<span class="thumbnail-sponsor">sponsorisé</span>'),a.setScrollEventListener("hl-beacon-impression")}).fail(function(){s.Utility.sendInsufficientAdsRequest()})):a.setAttribute("coveragecode","O"))},"request.mobilesearch:treatment":"request.homepage:treatment","request.searchcarousel:properties":{minmes:3,maxmes:10,creative:"1700x275_M-C-IG_TI-1_2_Search",beacon:"individual"},"request.searchcarousel:onprerender":function(e,d,u,t){if(-1<window.location.href.toLowerCase().indexOf("dyson"))return e.setAttribute("coveragecode","O");var r=location.hostname+"/api/navigation/rest/v1/thumbnail/suggestions/category";d.Utility.initialize(e,r);var i,p,h,m=e.getProperty("minmes");"none"!==e.getProperty("ashown")&&0!==u.length&&($("#hl_1").length?(i=d.Utility.createRequests(u,10,"&references=",!0,e.getProperty("platform")),h=!(p=[]),$.ajax({url:i[0],dataType:"html"}).done(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=d.Utility.getAdsFromResponse(e,n))<m)return i[1]?(h=!0,$.ajax({url:i[1],dataType:"html"})):void d.Utility.sendInsufficientAdsRequest()}).done(function(e,t,r){if(1==h){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=p.concat(d.Utility.getAdsFromResponse(e,n))).length<m)return void d.Utility.sendInsufficientAdsRequest()}p=p.slice(0,Math.min(4,p.length)),$("#hl_1").append('<section class="Carousel--light Carousel--light--sponsor js-Hooklogic-Carousel--light"><div class="thumbnail-sponsor js-sponsorTooltip" data-placement="right" data-original-title="Ce produit en vente sur fnac.com est mis en avant par nos partenaires">sponsorisé <i class="icon icon_i_081_HelpBis"></i></div><div class="Carousel js-Carousel"><div class="Carousel-overflowContainer Carousel-overflowContainer--noMargin"><div id="hl-Carousel" class="Carousel-container js-Carousel-container">\x3c!-- Append products thumbnails here --\x3e</div></div></div></section>');for(var i=0,o=p.length;i<o;i++){var a,s=p[i][1]||p[i][0],l=d.Utility.getSkuIdFromResponse(s),c=d.Utility.getAdForSkuId(u,l);c&&($(p[i]).addClass("hl-beacon-impression"),$(p[i]).attr("data-hl-beacon",c.ImpBeacon),$("#hl-Carousel").append(p[i]),a=d.Utility.getTrackingStringForAd(c,i+1,s),d.Utility.setTrackingStringForAd(a,$(s)),d.Utility.addClickHandlers($(s),c))}$(window).on("resize scroll",function(){d.Utility.addViewabilityOnResize()}),d.Utility.addViewabilityOnResize(),d.Utility.addViewabilityToFnacCarousel(),Fnac.Services.lazyImage&&Fnac.Services.lazyImage.render(),Fnac.Services.instantiateService.carousel(".js-Hooklogic-Carousel--light")}).fail(function(){d.Utility.sendInsufficientAdsRequest()})):e.setAttribute("coveragecode","O"))},"request.searchcarousel:treatment":"request.homepage:treatment","request.search:properties":{minmes:2,maxmes:10,creative:"1700x275_M-C-IG_TI-1_2_Search",beacon:"individual"},"request.search:onbeforecall":function(e,t){t.Utility.fireOrganicSkusBeacon()},"request.search:onprerender":function(a,s,l,e){$("#hl_1, #hl_2").remove();var o,c,d;s.Utility.initialize(a,"http://recherche.fnac.com/api/search/v1/suggestions"),"none"!==a.getProperty("ashown")&&0!==l.length&&(s.Utility.isValidToHitFnacAPIForSearch(l)?(o=s.Utility.createRequests(l,5,";",!1,a.getProperty("platform")),c=[],d=![],$.ajax({url:o[0],dataType:"html"}).then(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((c=s.Utility.getAdsFromResponse(e,n)).length<2){if(o[1])return d=!0,$.ajax({url:o[1],dataType:"html"});var i=new $.Deferred;return i.reject(),i}}).then(function(e,t,r){if($("#hl_1, #hl_2").remove(),1!=d)return c=c.slice(0,2),s.Utility.injectHookLogicDivs();var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((c=c.concat(s.Utility.getAdsFromResponse(e,n))).length<2){var i=new $.Deferred;return i.reject(),i}}).then(function(){s.Utility.appendFnacClass("#hl_1, #hl_2");for(var e=0,t=c.length;e<t;e++){var r=s.Utility.getSkuIdFromResponse(c[e][1]||c[e][0]),n=s.Utility.getAdForSkuId(l,r),i=$(".hl-product").eq(e);i.addClass("hl-beacon-impression"),i.attr("data-hl-beacon",n.ImpBeacon),i.append(c[e]),s.Utility.removeLazyLoading(i),i.children(".thumbnail.js-ProductThumbnail").addClass("thumbnail--sponsor");var o=s.Utility.getTrackingStringForAd(n,e+1);s.Utility.setTrackingStringForAd(o,i),s.Utility.addClickHandlers(i,n),s.Utility.addProductPageRedirect(i,n)}$("#hl_1, #hl_2").append('<span class="thumbnail-sponsor js-sponsorTooltip" data-placement="right" data-original-title="Ce produit en vente sur fnac.com est mis en avant par nos partenaires">sponsoris&eacute; <i class="icon icon_i_081_HelpBis"></i></span>'),s.Utility.instantiateListingModule(),a.setScrollEventListener("hl-beacon-impression")}).fail(function(){s.Utility.sendInsufficientAdsRequest()})):a.setAttribute("coveragecode","O"))},"request.search:treatment":"request.homepage:treatment","request.pdp:properties":{minmes:5,maxmes:20,creative:"1660x590_M-C-BG_TI-5_10_PDP",beacon:"individual"},"request.pdp:onbeforecall":function(e,t){var r=$("#DoNotMiss");r.hide(),r.after('<div id="hl_1" class="productStrates__row js-productStrate js-miniFa-async"></div>'),"web"==e.getProperty("platform")&&Fnac&&Fnac.Services&&Fnac.Services.hooklogicService&&Fnac.Services.hooklogicService.request&&(Fnac.Services.hooklogicService.request=function(){})},"request.pdp:onprerender":"request.homepage:onprerender","request.pdp:treatment":"request.homepage:treatment","request.mobilepdp:properties":{minmes:2,maxmes:20,creative:"1660x590_M-C-BG_TI-5_10_MobilePDP",beacon:"individual"},"request.mobilepdp:onprerender":function(c,d,u,e){if(-1<window.location.href.toLowerCase().indexOf("dyson"))return c.setAttribute("coveragecode","O");var i,p,h,t=location.hostname+"/api/navigation/rest/v1/thumbnail/suggestions/category";d.Utility.initialize(c,t),"none"!==c.getProperty("ashown")&&0!==u.length&&($("#hl_1").length?(i=d.Utility.createRequests(u,10,"&references=",!0,c.getProperty("platform")),h=!(p=[]),$.ajax({url:i[0]+"&mobile=1",dataType:"html"}).done(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=d.Utility.getAdsFromResponse(e,n))<5)return i[1]?(h=!0,$.ajax({url:i[1],dataType:"html"})):void d.Utility.sendInsufficientAdsRequest()}).done(function(e,t,r){if(1==h){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=p.concat(d.Utility.getAdsFromResponse(e,n))).length<5)return void d.Utility.sendInsufficientAdsRequest()}p=p.slice(0,Math.min(10,p.length)),$("#hl_1").append('<section class="FA-sponsor container js-accordion js-pasteOnTop open"><h2 class="js-accordion-title open"><span>A Ne Pas Rater</span></h2><div class="js-accordion-content container-fluid open"><div class="container"><div id="hl-carousel" class="hl_1-carousel simpleCarousel">\x3c!-- Append products thumbnails here --\x3e</div></div><span class="thumbnail-sponsor">sponsorisé</span></div></section>');for(var i=0,o=p.length;i<o;i++){var a=p[i][1]||p[i][0],s=d.Utility.getSkuIdFromResponseMobile(a),l=d.Utility.getAdForSkuId(u,s);l&&($(p[i]).addClass("hl-beacon-impression"),$(p[i]).attr("data-hl-beacon",l.ImpBeacon),$("#hl-carousel").append(p[i]),d.Utility.removeFnacRedirect(a),d.Utility.addClickHandlers($(a),l,!1,!0),d.Utility.addProductPageRedirect($(a),l))}d.Utility.addViewabilityToFnacMobileCarousel(),c.setScrollEventListener("hl-beacon-impression")}).fail(function(){d.Utility.sendInsufficientAdsRequest()})):c.setAttribute("coveragecode","O"))},"request.mobilepdp:treatment":"request.homepage:treatment","request.department:properties":{minmes:5,maxmes:20,creative:"1660x590_M-C-BG_TI-5_10_Department",beacon:"individual"},"request.department:onprerender":"request.homepage:onprerender","request.department:treatment":"request.homepage:treatment","request.mobiledepartment:properties":{minmes:2,maxmes:20,creative:"1660x590_M-C-BG_TI-5_10_MobileDepartment",beacon:"individual"},"request.mobiledepartment:onprerender":function(c,d,u,e){var i,p,h,t=location.hostname+"/api/navigation/rest/v1/thumbnail/suggestions/category";d.Utility.initialize(c,t),"none"!==c.getProperty("ashown")&&0!==u.length&&($("#hl_1").length?(i=d.Utility.createRequests(u,10,"&references=",!0,c.getProperty("platform")),h=!(p=[]),$.ajax({url:i[0]+"&mobile=1",dataType:"html"}).done(function(e,t,r){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=d.Utility.getAdsFromResponse(e,n))<5)return i[1]?(h=!0,$.ajax({url:i[1],dataType:"html"})):void d.Utility.sendInsufficientAdsRequest()}).done(function(e,t,r){if(1==h){var n=r.getResponseHeader("Content-Type").match(/boundary="([\w-]*)"/)[1];if((p=p.concat(d.Utility.getAdsFromResponse(e,n))).length<5)return void d.Utility.sendInsufficientAdsRequest()}p=p.slice(0,Math.min(10,p.length)),$("#hl_1").append('<div class="Home-sponsor"><header class="title"><span>A Ne Pas Rater</span></header><div class="Home-sponsor-wrapper"><div class="container"><div id="hl-carousel" class="hl_1-carousel simpleCarousel">\x3c!-- Append products thumbnails here --\x3e</div></div><span class="thumbnail-sponsor">sponsorisé</span></div></div>');for(var i=0,o=p.length;i<o;i++){var a=p[i][1]||p[i][0],s=d.Utility.getSkuIdFromResponseMobile(a),l=d.Utility.getAdForSkuId(u,s);l&&($(p[i]).addClass("hl-beacon-impression"),$(p[i]).attr("data-hl-beacon",l.ImpBeacon),$("#hl-carousel").append(p[i]),d.Utility.removeFnacRedirect(a),d.Utility.addClickHandlers($(a),l,!1,!0),d.Utility.addProductPageRedirect($(a),l))}d.Utility.addViewabilityToFnacMobileCarousel(),c.setScrollEventListener("hl-beacon-impression")}).fail(function(){d.Utility.sendInsufficientAdsRequest()})):c.setAttribute("coveragecode","O"))},"request.mobiledepartment:treatment":"request.homepage:treatment","order:onbeforecall":function(e,t){var r=e.getProperty("productid");if(r){for(var n=r.split("|"),i="",o=0;o<n.length;o++)i=i+"1-"+n[o],o!=n.length-1&&(i+="|");e.setProperty("productid",i)}},"update:properties":{beacon:"individual"}};var HLLibrary=HLLibrary||function(w,g,f,n,i,y,v,e){"use strict";var t={},r=0,b={REQUEST:0,UPDATE:0,ORDER:0,EVENT:0,ORGANIC:0},_={},C={},o={"en-US":["$","",",",".",2],"en-UK":["£","",",",".",2],"fr-FR":["€","",".",",",2],"pt-BR":["R$","",".",",",2],"fr-CA":[""," $"," ",",",2],"en-CA":["$","",",",".",2]},a="en-US",A={CDN:"//static.criteo.net/cbs/prod/v1",STYLESPATH:(w=w||{}).stylespath||"//static.criteo.net/cbs/prod/v1/ClientPaths",SYNC:"//"+i+"/sync?dest="+location.protocol.replace(":","")+"%3A%2F%2Fidsync.rlcdn.com%2F382779.gif%3Fpartner_uid=[HMGUID]",shouldUseViewability:"True"==e,APNX:"http://ib.adnxs.com/getuid?http%3A%2F%2F"+i+"%2Fsync%3Fvendor%3Dadnxs%26uid%3D%24UID",APNX_S:"https://secure.adnxs.com/getuid?https%3A%2F%2F"+i+"%2Fsync%3Fvendor%3Dadnxs%26uid%3D%24UID",CLIENTID:f,MAXURLLENGTH:2e3,ENV:function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r=(t[2]||"0").split("."),n={browser:t[1]||"",version:r[0]||"0",quirks:"CSS1Compat"!=document.compatMode};return n.supported=void 0!==window.JSON&&!("msie"==n.browser&&(n.version<8||8==n.version&&n.quirks)),n.maxUrl="msie"==n.browser?2048:8192,n}(navigator.userAgent),log:function(){try{y?(A.log=function(){try{if("undefined"==typeof console||0==arguments.length)return;var e=Array.prototype.slice.call(arguments,0);e[0]="RM: "+e[0],console.log.apply(console,e)}catch(e){try{console.log(e.toString())}catch(e){}}},A.log.apply(this,Array.prototype.slice.call(arguments,0))):A.log=function(){}}catch(e){try{console.log(e.toString())}catch(e){}}},error:function(e){try{var t,r,n;e.stack&&(r=(t=/\(.+:(\d+):(\d+)\)/.exec(e.stack)||[])[1],n=t[2]),A.log(e.toString()+(r?" at "+r+":"+n:"")),A.dropBeacon(A.toBeacon({msg:e.toString(),line:r,col:n},i+"/error"))}catch(e){try{console.log(e.toString())}catch(e){}}},getCookie:function(e){try{e=e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");var t=document.cookie.match(new RegExp("(?:^|;)\\s?"+e+"=(.*?)(?:;|$)","i"));if(t)return decodeURIComponent(t[1])}catch(e){A.error(e)}return null},setCookie:function(e,t,r){try{var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3);var i=e+"="+t+"; expires="+n.toGMTString()+"; path=/";document.cookie=i,A.log("set cookie "+i)}catch(e){A.error(e)}},getPID:function(e){return A.urlParse(e).qs.pid},getAdBlockerState:function(){return x||"1"===A.getCookie("CRTOABE")?"1":"0"},urlParse:function(e,t){var r,n,i,o={full:String(e),qs:{},frag:null},a=e.indexOf("#");if(-1<a&&(o.frag=e.substring(a+1),e=e.substring(0,a)),(a=e.indexOf("?"))<0)o.page=e;else for(o.page=e.substring(0,a),r=e.substring(a+1).split("&"),i=0;i<r.length;++i)2==(n=r[i].split("=")).length&&(t?o.qs[n[0]]=decodeURIComponent(n[1].replace(/\+/g,"%20")):o.qs[n[0].toLowerCase()]=decodeURIComponent(n[1].replace(/\+/g,"%20")));return o},strTrim:function(e){return null==e?"":e.toString().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},hasOption:function(e){return!!t[e]},isNumeric:function(e){var t=Number(e);return!isNaN(t)&&isFinite(t)},isInteger:function(e){return Number(e).toFixed(0)==e},toNumber:function(e){var t=o[a],r=parseFloat(e).toFixed(t[4]).split(".");return t[0]+r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t[2])+(0<t[4]?t[3]+r[1]:"")+t[1]},setCulture:function(e){if(!o.hasOwnProperty(e))throw"The culture code '"+e+"' is not recognized.";a=e},isInView:function(e,t){A.log(e),A.log(t);var r=(t.left+t.right)/2,n=(t.top+t.bottom)/2;return A.log(n),A.log(r),A.log(n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right),n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right},getPosition:function(e){for(var t=e.offsetTop,r=e.offsetLeft,n=e.offsetHeight,i=e.offsetWidth;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,r+=e.offsetLeft;return{left:r,top:t,height:n,width:i,bottom:t+n,right:r+i}},toMap:function(e,t,r){t=t||"|",r=r||"^";for(var n,i={},o=e.split(t),a=0,s=o.length;a<s;++a)2==(n=o[a].split(r)).length&&(i[n[0]]=n[1]);return i},toUrl:function(e,t){if(e){var r=e.indexOf("//"),n=r<0?"//"+e:e.substring(r),i=[];for(r in t)i.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return 0<i.length&&(n+=(n.indexOf("?")<0?"?":"&")+i.join("&")),n}},toResource:function(e){return this.toUrl(e,{_:w.resv})},toBeacon:function(e,t){return A.toUrl(t||i+"/beacon",e)},htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e.replace("&apos;","'"),t.innerText||t.textContent},htmlEncode:function(e){var t=document.createElement("div");return t.innerText=t.textContent=e,t.innerHTML.replace('"',"&quote;")},clip:function(e,t,r,n){n=n||"";var i,o=/[\w-]/;if(e.length>t){for(i=t;0<i;--i)if(o.test(e.charAt(i))){for(--i;0<i&&o.test(e.charAt(i));--i);if(0<i)return e.substr(0,i)+n}if(2==r||3==r)for(i=t+1;i<e.length;++i)if(o.test(e.charAt(i))){for(++i;i<e.length&&o.test(e.charAt(i));++i);return e.substr(0,i)+n}if(1==r||3==r)return e.substr(0,t)+n}return e},newGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},getRand:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},isDom:function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:null!==e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},toDom:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},addCss:function(e,t){var r,n=e.split("/").map(function(e){return"Delivery"===e||"ClientPaths"===e?e:e.toLowerCase()}).join("/");C[n]||(C[n]=1,(r=document.createElement("link")).rel="stylesheet",r.type="text/css",r.href=t?this.toResource(n):n,document.getElementsByTagName("head")[0].appendChild(r))},addScript:function(e,t,r){var n=document.createElement("script");n.type="text/javascript",n.async=!!t,n.src=r?this.toResource(e):e,document.getElementsByTagName("head")[0].appendChild(n)},addIframe:function(e){var t=document.createElement("iframe");t.src=e,t.width=0,t.height=0,t.style.visibility="hidden",document.getElementsByTagName("body")[0].appendChild(t)},dropBeacon:function(e){var t=document.createElement("img");t.src=A.toUrl(e+"&libversion=1"),A.log("beaconed "+t.attributes.src.value)},getEventCount:function(e){return b[e.toUpperCase()]||0},newRequest:function(){return new q(++r)},newUpdate:function(){return new R(++r)},newOrder:function(){return new I(++r)},newEvent:function(){return new F(++r)},newOrganicUpdate:function(){return new S(++r)},setOption:function(e){t[e]=1},productHostRemap:function(t){try{var e=A.urlParse(t);return e.qs.hasOwnProperty("dest")&&(e.qs.dest=e.qs.dest.replace(/http(s{0,1}):\/\/[^\/]+/i,location.protocol+"//"+location.host)),A.toUrl(e.page,e.qs)}catch(e){return A.error(e),t}}};function P(e,t){var r,n,i=(e+":"+t).toLowerCase(),o=void 0;return A.log("--\x3e "+i),"function"==typeof w[i]?o=w[i].apply(null,Array.prototype.slice.call(arguments,2)):"string"==typeof w[i]?(r=w[i].split(":"),(n=Array.prototype.slice.call(arguments,2)).unshift(r[1]),n.unshift(r[0]),o=P.apply(null,n)):A.log("No handler defined for "+i),A.log("<-- "+i),o}function s(e,t,r){var n=document.getElementsByTagName("script")[0],i=document.createElement("img");i.src=e,i.height=1,i.width=1,i.style.display="none",i.onload=t,i.onerror=r,"HTMLImageElement"==typeof i&&n.parentNode.insertBefore(i,n)}function l(e){k=!0,A.setCookie("CRTOABE",e?"1":"0",1)}var c=null!==A.getCookie("debug-mode"),d=null!==A.getCookie("rm-debug");y=!!y||c||d,function(e,t){if(t.plugins)for(var r in t.plugins)e[r]=t.plugins[r].source(e,t.plugins[r].data||null)}(A,w);var U=A.newGUID();P("library","onInit",A),A.hasOption("sync")&&A.addIframe(A.SYNC),A.hasOption("apxn")&&("https:"==location.protocol?A.dropBeacon(A.APNX_S):A.dropBeacon(A.APNX));var u,p,h,m,k=!1,x=!1;null===(m=A.getCookie("CRTOABE"))||"1"!==m&&"0"!==m?(u=location.protocol+"//static.criteo.net/images/pixel.gif?ch=1",h=p=!1,s(u,function(){p=!0,h&&l(!0)},function(){x=!0}),s(location.protocol+"//static.criteo.net/images/pixel.gif?ch=2",function(){l(!1)},function(){h=!0,p&&l(!0)})):k=!0;function T(p,h,t){var m={params:{},filters:{},ns:p.toLowerCase(),treatment:"treatment",styleInlineAuto:"style",attr:{},divs:[],maps:{},endpoint:null,require:{},state:{},opts:{},ready:0};this.my=m,this.setOption=function(e){m.opts[e]=1},this.hasOption=function(e){return!!m.opts[e]},this.getNamespace=function(){return m.ns},this.getProperty=function(e){var t=A.strTrim(e).toLowerCase();return m.params.hasOwnProperty(t)?m.params[t]:null},this.setProperty=function(e,t){try{var r=A.strTrim(e).toLowerCase();if(m.maps[r]&&(r=m.maps[r]),"nodisplay"==r)return this.setProperty("displaya","0").setProperty("abflags","PreserveCoverage").setProperty("rsn",t);"brand"==r&&t instanceof Array&&(t=t.join("|")),null==t||""===t?m.params.hasOwnProperty(r)?(delete m.params[r],m._log("unset-prop "+e)):m._log("set-prop "+e+" = <*empty*>"):(m.params[r]=t,m._log("set-prop "+e+" = "+t))}catch(e){A.error(e)}return this},this.setPropertyAsEmpty=function(e){try{var t=A.strTrim(e).toLowerCase();m.params[t]="",m._log("set-prop "+e+" = ")}catch(e){A.error(e)}return this},this.setProperties=function(e){if(null!=e)for(var t in e)e.hasOwnProperty(t)&&this.setProperty(t,e[t]);return this},this.getAttribute=function(e){var t=e.toString().toLowerCase();return m.attr[t]||null},this.setAttribute=function(e,t){try{var r=A.strTrim(e).toLowerCase();null==t||""===t?m.attr.hasOwnProperty(r)&&(delete m.attr[r],m._log("unset-attr "+e)):(m.attr[r]=t,m._log("set-attr "+e+" = "+t))}catch(e){A.error(e)}return this},this.setAttributes=function(e){if(null!=e)for(var t in e)e.hasOwnProperty(t)&&this.setAttribute(t,e[t]);return this},this.submit=function(){try{if(m.ready=0,P(m.ns,"onReadyCheck",this,A),k||x||(m.ready=10),m.ready<0)return void m._log("Aborted");if(0<m.ready)return m._log("Defering "+m.ready+" ms"),d=this,u=arguments,void setTimeout(function(){d.submit.apply(d,Array.prototype.slice.call(u,0))},m.ready);var e,t,r;if(++b[p],h?(this.setProperty("cid",f),this.setProperty("pid",A.newGUID())):(this.setProperty("apikey",g.toUpperCase()),this.setProperty("useState","1"),this.setAttribute("clientid",f),this.getProperty("platform")||this.setProperty("platform",v)),this.setProperty("_",A.getRand(1,1e11)),this.setProperty("~uid",U),this.setProperty("abe",A.getAdBlockerState()),m.params.hasOwnProperty("puserid")||(e=this,(c=A.getCookie("s_vi"))||((c=A.getCookie("__utma"))?c=c.split(".").slice(0,3).join("."):(c=A.getCookie("hl_p"))||(c=A.newGUID(),e._set("cbspuserid","true"))),t=c,this.setProperty("puserid",t)),this.setProperties(w[m.ns+":properties"]),this.setAttributes(w[m.ns+":attributes"]),!y||(r=A.getCookie("debug-params"))&&this.setProperties(A.toMap(r)),P(m.ns,"onBeforeCall",this,A),m._prep.apply(null,Array.prototype.slice.call(arguments,0)),m.params["~it"]="js",!m._isValid())return;if(h)A.dropBeacon(A.toBeacon(m.params,m.endpoint));else{var n=m.params.skuid,i=m.attr.splitorganicskusbeacon,o=A.toUrl(m.endpoint,m.params).length;if(!1!==i&&o<A.MAXURLLENGTH){if(!_[n]){_[n]=1;for(var a=A.newOrganicUpdate(),s=["skuid","cuserid","puserid","hlpt"],l=0;l<s.length;++l)m.params.hasOwnProperty(s[l])&&a.setProperty(s[l],m.params[s[l]]);this._set("organic",a)}this.hasOption("sku-filter")&&m.params.hasOwnProperty("filters")?this.setProperty("skuLookupOnly","true"):this.setProperty("skuid",null)}else m.params.organicskus=m.params.skuid,delete m.params.skuid;!function(e,t,r){var n="hl_c"+A.getRand(1e6,9999999);t.json=n,window[n]=function(e){r(e),window[n]=void 0;try{delete window[n]}catch(e){}},t.apikey&&(t.apiKey=t.apikey,delete t.apikey);var i=A.toUrl(e,t);A.addScript(i,!0),A.log("called "+i)}(m.endpoint,m.params,m._cb)}}catch(e){console.log(e),A.error(e)}var c,d,u},m._log=function(e){A.log(p+" ("+t+") "+e.toString())},this._setReadyState=function(e){m.ready=e,m._log("readystate = "+e)},this._get=function(e){var t=A.strTrim(e).toLowerCase();return m.state.hasOwnProperty(t)?m.state[t]:void 0},this._set=function(e,t){try{var r=A.strTrim(e).toLowerCase();void 0===t?m.state.hasOwnProperty(r)&&delete m.state[r]:m.state[r]=t}catch(e){A.error(e)}return this},m._isValid=function(){var e,t=!0;for(e in m.require)m.params.hasOwnProperty(e)||(t=!1,m._log("Validation Error: Missing property '"+m.require[e]+"'"));return t},m._prep=function(){},m._cb=function(e){try{m._log("API Response",e),e.PageBeacon&&A.dropBeacon(e.PageBeacon)}catch(e){A.error(e)}}}var R=function(e){var t=new T("UPDATE",!1,e),r=t.my;return delete t.my,r.endpoint=n+"/delivery/api/product",r.maps={hlpagetype:"hlpt",instock:"quantity",sku:"productid",regularprice:"compareprice",publishersku:"pgid",sellerid:"aid"},r._isValid=function(){return!(!r.params.hasOwnProperty("productid")&&!r.params.hasOwnProperty("parentsku"))||(r._log("Validation Error: Missing required 'sku' or 'parentsku'"),!1)},t},S=function(e){var t=new T("ORGANIC",!0,e),r=t.my;return delete t.my,r.endpoint=i+"/beacon",r.maps={hlpagetype:"hlpt",skuid:"organicskus"},r.require={organicskus:"organicSKUs"},r._prep=function(){t.setProperty("action","skudata")},t},I=function(e){var t=new T("ORDER",!1,e),r=t.my;return delete t.my,r.endpoint=n+"/delivery/api/confirmation",r.maps={hlpagetype:"hlpt",sku:"productid",sellerid:"aid"},r.require={productid:"sku",price:"price",quantity:"quantity"},t},F=function(e){var t=new T("EVENT",!0,e),r=t.my;return delete t.my,r.endpoint=i+"/beacon",r.maps={hlpagetype:"hlpt",sku:"prodid",parentsku:"psku",publishersku:"pgrp",eventtype:"ec",eventdata:"ep",attributionId:"add_id"},r.require={ec:"eventType"},r._prep=function(){t.setProperty("action","logevent"),"object"==typeof r.params.ep&&t.setProperty("ep",JSON.stringify(r.params.ep))},t},q=function(e){var v=new T("REQUEST",!1,e),b=v.my;return delete v.my,b.maps={hlpagetype:"hlpt",organicskus:"skuid"},b._isValid=function(){for(var e=["taxonomy","keyword","encrypted_taxonomy","encrypted_keyword","skuid","sku2skuid"],t=0,r=e.length;t<r;++t)if(b.params[e[t]])return!0;return b._log("Failed Validation: Missing call to setTaxonomy, setKeyword or setProduct"),!1},b._prep=function(){A.ENV.supported||(v.setProperty("nodisplay","notsupported"),v.setAttribute("_unsupported",!0));var e=JSON.stringify(b.filters);if("{}"!=e&&v.setProperty("filters",e),v.setContainer.apply(v,Array.prototype.slice.call(arguments,0)),b.endpoint=n+"/delivery/api/",b.params.productid&&"related"==v.getProductMatchType())b.endpoint+="relatedSkus",v.setProperty("sku2skuid",b.params.productid),v.setProperty("productId",null);else if(b.params.taxonomy||b.params.encrypted_taxonomy)b.endpoint+="taxonomy";else{if(!b.params.keyword&&!b.params.encrypted_keyword)throw A.log("CANNOT RESOLVE REQUEST ENDPOINT, AT LEAST ONE OF THE FOLOWING FIELDS MUST BE PRESENT IN THE REQUEST IN library.js: \nproductId: "+b.params.productid+"\ntaxonomy: "+b.params.taxonomy+"\nencrypted taxonomy: "+b.params.encrypted_taxonomy+"\nkeyword: "+b.params.keyword),"Cannot Resolve Request Endpoint";b.endpoint+="search"}},b._cb=function(e){var t,r,n,i,o,a=[];try{var s,l,c,d,u,p,h,m=[],g=A.hasOption("product-host-remap");if(e.OptOut?A.getCookie("hl_p")&&A.setCookie("hl_p","",-1):A.hasOption("no-cookie")||"true"===v._get("cbspuserid")&&A.setCookie("hl_p",v.getProperty("puserid")),0===(d=e.ProductAd||e.SearchProductAd||[]).length&&A.hasOption("auto-retry")&&!0!==b.retry)return b._log("auto-retrying"),b.retry=!0,void v.submit();for(y=0;y<d.length;++y)d[y]._ra=JSON.parse(d[y].RenderingAttributes||"{}"),d[y]._used=!0,d[y].Count=d.length,d[y].Index=y,d[y].Treatment=b.treatment,g&&(d[y].ProductPage=A.productHostRemap(d[y].ProductPage));for(u=A.urlParse(e.PageBeacon),(h=v._get("organic"))&&(h.setProperty("pageGUID",u.qs.pid),h.submit()),P(b.ns,"onPreRender",v,A,d,u),c=b.attr.encode||1,y=0;y<d.length;++y){if(d[y].ProductName&&(d[y].ProductName=A.htmlDecode(A.htmlDecode(d[y].ProductName.replace("\\'","'")))),d[y]._ta=b.attr,d[y].ProductPage){if(l=A.toUrl(d[y].ProductPage),b.attr.linkprefix){for(l="http:"+l,s=0;s<c;++s)l=encodeURIComponent(l);l=A.toUrl(b.attr.linkprefix+l)}d[y].ProductPage=l}(p=P(b.ns,d[y].Treatment,A,d[y]))&&m.push(A.toDom(p))}t=b.ns,r=b.styleInlineAuto,o=(t+":"+r).toLowerCase(),C[o]||(C[o]=1,(n=w[o])&&(i=A.toDom(n)[0],document.getElementsByTagName("head")[0].appendChild(i),A.log("Inserted inline stylesheet: "+o))),0<d.length?P(b.ns,"onPageBind",v,A,m,b.divs,u):P(b.ns,"onNoContent",v,A,b.divs,u);var f=v.getAttribute("coverageCode");if(null!==f&&(u.qs.c=f),"universal-imps"==u.qs.action&&(u.qs.action="universal"),window.addEventListener&&A.shouldUseViewability){if(0<d.length){0<document.getElementsByClassName("hl-beacon-universal").length?(A.log("--\x3ebootloading univeral view beacons"),u.qs.btf=1,a.push("hl-beacon-universal")):0<document.getElementsByClassName("hl-beacon-impression").length&&!v.hasOption("no-imps")&&(A.log("--\x3ebootloading univeral impression beacons"),a.push("hl-beacon-impression"));for(var y=0;y<a.length;y++)v.setScrollEventListener(a[y]);A.log("<--end loading beacons")}A.dropBeacon(A.toUrl(u.page,u.qs))}else{if(A.log("--\x3eStandard Beacon Drops"),A.dropBeacon(A.toUrl(u.page,u.qs)),"universal"!=u.qs.action&&!v.hasOption("no-imps"))for(y=0;y<d.length;++y)d[y].ImpBeacon&&d[y]._used&&A.dropBeacon(d[y].ImpBeacon);A.log("<--Standard Beacon Drops")}}catch(e){A.error(e)}},b.checkVisible=function(e){A.log("--\x3echecking visibility.");var t=document.getElementsByClassName(e);A.log(t);for(var r,n={top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth},i=0;i<t.length;++i){null!=t[i].getAttribute("data-hl-beacon-state")&&"ready"!=t[i].getAttribute("data-hl-beacon-state")||(r=A.getPosition(t[i]),A.isInView(n,r)?(A.log("visible"),A.dropBeacon(t[i].getAttribute("data-hl-beacon")),P(b.ns,"onViewed",A),t[i].setAttribute("data-hl-beacon-state","sent")):A.log("not visible"))}},v.setScrollEventListener=function(e){var t=[];function r(){for(var e=0;e<t.length;e++)b.checkVisible(t[e])}t.push(e),window.addEventListener("scroll",r),setTimeout(r,1e3)},v.setModule=function(e){try{var t;-1<(e=A.strTrim(e)).indexOf("_")&&(e=(t=e.split(/_/))[t.length-1]),b.ns="request."+e.toLowerCase(),b._log("module "+e)}catch(e){A.error(e)}return v},v.setTreatment=function(e){try{b.treatment=A.strTrim(e),b._log("treatment "+e)}catch(e){A.error(e)}return v},v.setInlineStyle=function(e){b.styleInlineAuto=e||"style"},v.setTaxonomy=function(e,t){return(t=t||!1)?v.setProperty("encrypted_taxonomy",e):v.setProperty("taxonomy",e)},v.setKeyword=function(e,t){return t=t||!1,null!=e?t?v.setProperty("encrypted_keyword",e):-1<n.indexOf("retail-eu")?v.setProperty("keyword",e.replace(/[^A-Za-zéèàêâùïüëáíóúãõçÿæøğåãäößş0-9_' -]/g,"").toLowerCase()):v.setProperty("keyword",e.replace(/[^A-Za-z0-9_\' -]/g,"").toLowerCase()):v},v.getAllFilters=function(){return b.filters},v.setFilter=function(e,t,r){try{r=r||"|";var n=e.toString().toLowerCase();null==t||""===t?b.filters.hasOwnProperty(n)?(delete b.filters[n],b._log("unset-filter "+e)):b._log("set-filter "+e+" = <*empty*>"):(t=t.toString(),b.filters[n]=-1<t.indexOf(r)?t.split(r):t,b._log("set-filter "+e+" = "+t))}catch(e){console.log(e),A.error(e)}return v},v.setProduct=function(e,t,r){try{r=r||"|",e&&this.setProperty("parentSku",e),t&&this.setProperty("productId",t.replace(r,"|"))}catch(e){A.error(e)}return v},v.setProducts=function(e){try{e&&this.setProperty("productId",e)}catch(e){A.error(e)}return v},v.setProductMatchType=function(e){try{if(e)switch(e.toLowerCase()){case"related":this.setAttribute("matchtype","related");break;case"exact":this.setAttribute("matchtype","exact");break;default:A.log(e+" is not a valid product match type defaulting to exact."),this.setAttribute("matchtype","exact")}else A.log("Invalid product match type defaulting to exact."),this.setAttribute("matchtype","exact")}catch(e){A.error(e)}return v},v.getProductMatchType=function(){try{this.getAttribute("matchtype")||v.setProductMatchType("exact")}catch(e){A.error(e)}return this.getAttribute("matchtype")},v.setContainer=function(){for(var e,t=v._get("_ids")||{},r=0,n=arguments.length;r<n;++r){e=arguments[r].toString();var i=document.getElementById(e);null===i||t.hasOwnProperty(e)?b._log("Warning: DOM "+e+" does not exist."):(b._log("Container: "+e),b.divs.push(i),t[e]=1)}return v._set("_ids",t),v},v.getPartial=function(e){var t=P(b.ns,"_"+e,A,null);return t?A.toDom(t):t},v};return A}(hl_ext,hl_key,hl_cid,hl_api,hl_beam,hl_debug,hl_channel,hl_use_viewability);delete hl_ext,delete hl_key,delete hl_cid,delete hl_api,delete hl_beam,delete hl_debug,delete hl_channel,delete hl_use_viewability;