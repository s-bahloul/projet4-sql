!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){"use strict";var n=r(1),i=t.exports=function(){return new n.Deferred};i.all=r(8),i.race=r(9),i.Promise=r(10),i.Promise.all=i.all,i.Promise.race=i.race},function(t,e,r){"use strict";function n(t,e,r){return-1!==t.state?t:(t.state=e,t._value=r,function(t){if(-1===t.state)return t;if(t._next){var e,r;for(e=0,r=t._next.length;e<r;e+=1)a(t._next[e],t._value,t.state);r&&(t._next=[])}return t}(t))}function i(t){var e={first:!0};return[function(r){e.first&&(e.first=!1,o(t,r))},function(r){e.first&&(e.first=!1,n(t,1,r))},e]}function o(t,e){if(t===e&&n(t,1,new TypeError("Error : trying to resolve a deferred with itself")),-1!==t.state)return t;var r,o,a=typeof e,c=!1;if(("object"===a||"function"===a)&&null!==e){o=i(t);try{if("function"!=typeof(r=e.then))return n(t,0,e);r.call(e,o[0],o[1]),c=!0}catch(e){o[2].first&&!c&&n(t,1,e)}}return!c&&(o&&o[2].first||!o)?n(t,0,e):t}function a(t,e,r){return setTimeout((function(){var i;try{i=t._handlers[r].call(void 0,e)}catch(e){return n(t,1,e)}return o(t,i)}),0),t}function c(t,e){var r=i(this);t="function"==typeof t?t:r[0],e="function"==typeof e?e:r[1],this._handlers=[t,e],this._next=[],this.state=-1,this._value=void 0}function s(){this.promise=new c}c.prototype.then=function(t,e){var r=new c(t,e);return-1!==this.state?a(r,this._value,this.state):(this._next.push(r),r)},c.prototype.catch=function(t){return this.then(null,t)},s.prototype.resolve=function(t){return o(this.promise,t)},s.prototype.reject=function(t){return n(this.promise,1,t)},t.exports={Thenable:c,Deferred:s}},function(t,e,r){"use strict";var n=r(11),i=r(12),o=n.reduce(n,(function(t,e,r){return t[r]=e,t}),{});t.exports=n.reduce(i,(function(t,e,r){return t[r]=e,t}),o)},function(t,e,r){"use strict";function n(){}function i(t){this.name=t}var o=function(t){return new i(t)};i.prototype.read=function(){return o.read(this.name)},i.prototype.write=function(t,e,r){return o.write(this.name,t,e,r),this},i.prototype.delete=function(){return o.delete(this.name),this};var a=!1;t.exports=function(t){if(a)return o;var e=t.location.hostname.split(".");e="."+(e=e.length>2?e.slice(e.length-2).join("."):e.join("."));var r="cookie"in t&&(t.cookie.length>0||(t.cookie="test").indexOf.call(t.cookie,"test")>-1);return r?(o.read=function(e){return function(t,e){var r,n=t.cookie;return(r=n.indexOf(e))>-1?(e+="=",n.slice(r+e.length).split(";")[0]):null}(t,e)},o.write=function(r,n,i,o){return function(t,e,r,n,i){var o=null,a=[e,r].join("=");i=["domain",i].join("="),"number"!=typeof n||isNaN(n)||(o=(new Date).getTime()+n,o=["expires",o=new Date(o).toUTCString()].join("=")),t.cookie=null!==o?[a,o,"path=/",i].join(";"):[a,"path=/"].join(";")}(t,r,n,i="number"==typeof i?i:18e5,o||e),this},o.delete=function(t){return this.write(t,"",-100)},o.has=function(t){return null!==this.read(t)},o.enabled=r):(o.enabled=r,o.write=n,o.has=n,o.delete=n,o.read=n),a=!0,o}},function(t,e,r){var n=r(5),i=r(6);i.settings.trackerEndPoint="//degh48.fnac.com/",i.retailerContext=n;var o=i.__sto;o.utils.retailerMethod=r(34);i.init().then((function(t){return t.load(),o.globals.spa=!0,__sto.globals.hasBeenRegen=!1,t})).then((function(t){try{window.tc_vars&&window.tc_vars.user_m&&function(t,e){var r=document.createElement("IMG"),n=t;for(var i in e)n+=i+"="+e[i]+"&";n=n.slice(0,-1),r.setAttribute("src",n),r.setAttribute("style","display:none; height: 1px; width: 1px;"),document.querySelector("body").appendChild(r)}("//degh48.fnac.com/match?",{tp:"fnac_user_m",ci:window.tc_vars.user_m,n:"degh48.fnac.com"})}catch(e){t.error({tl:"cookie_matching"})}return t})).then((function(t){var e=window.jQuery||window.Jidz;return e&&"function"==typeof e&&(window.Fnac&&window.Fnac.config&&window.Fnac.config.isMobile?e(document).on("vclick",".js-ProductBuy-add, .js-ProductBuy-addInline",(function(){if(!e(this).closest(".sto-item-product").length)try{var r=e(this).closest(".Carousel-item,.Article-mosaicItem,.Article-item,.ProductSummary").find(".js-minifa-title,.thumbnail-titleLink,.ProductSummary-title").first().text(),n=this.getAttribute("data-prid")||e(".f-productPage").attr("data-prid");r?t.addToCart({tl:n,pi:n,pl:o.utils.fn.cleanString(r)}):t.addToCart({tl:n,pi:n})}catch(e){t.error({tl:"ABP error"})}})):e(document).on("click",".js-ProductBuy-add, .js-ProductBuy-addInline",(function(){try{if(e(this).closest(".sto-item-product").length)return;var r=e(this).closest(".Carousel-item,.Article-mosaicItem,.Article-item,.ProductSummary, .f-productPage").find(".js-minifa-title,.thumbnail-titleLink,.ProductSummary-title, .f-productHeader-Title").first().text(),n=this.getAttribute("data-prid")||e(".f-productPage").attr("data-prid");r?t.addToCart({tl:n,pi:n,pl:o.utils.fn.cleanString(r)}):t.addToCart({tl:n,pi:n})}catch(e){t.error({tl:"ABP error"})}})),e(".Article-desc a, .Article-itemVisual").on("click",(function(r){try{var n=e(this).closest(".Article-item, .Article-mosaicItem"),i=n.find(".js-ProductBuy").attr("data-product-id"),a=o.utils.fn.cleanString(n.find(".Article-desc a, .Article-desc .thumbnail-titleLink").text());t.sendHit({ta:"fp",tl:i,pi:i,pl:o.utils.fn.cleanString(a)})}catch(r){t.error({tl:"FP error"})}})),e(".searchFA").on("vclick",(function(r){try{var n=e(this).closest(".searchFA"),i=n.find(".title .ui-link").attr("rel").replace("preview",""),a=n.find(".info-article .title").text();t.sendHit({ta:"fp",tl:i,pi:i,pl:o.utils.fn.cleanString(a)})}catch(r){t.error({tl:"FP error"})}}))),t})).then((function(t){if("orderpipe/pop/merci"===t.value("rp"))try{if(!window.tc_vars||!window.tc_vars.order_products)throw new Error("tc_vars.order_products_not_available");var e=window.tc_vars.order_products.map((function(t){var e="string"==typeof t[4]?parseInt(t[4],10):0,r="string"==typeof t[5]?parseFloat(t[5],10):0;return{name:o.utils.fn.cleanString(t[1]),id:t[0],qty:e,price:r,promo:!1}}));t.buy(e,null,window.tc_vars.order_id)}catch(e){e=e.message||e,t.error({tl:"onBuy"+e})}})).then((function(t){var e=window.jQuery||window.Jidz;return e&&e(document).on("ajaxComplete",(function(t,e,r){try{var n=e.responseJSON||JSON.parse(e.responseText);n&&n.update&&n.update.request&&n.update.request.type&&n.update.request.type.indexOf("updateviewmode")&&(__sto.globals.hasBeenRegen=!0,__sto.regen())}catch(t){}})),t})).then((function(t){window.setTimeout((function(){var t=window.__sto;if(t&&void 0===t.globals.server_data){var e,r,n=window.document.getElementById("sto_fallback"),i={placements:{}};null!==n&&(e=n.getAttribute("data-format"),r=n.getAttribute("data-url"),i.placements[e]={script:r},t.deliv(i),t.deliv=function(){t.track({ta:"err",tl:"Fallback on"})})}}),1500)})).then(null,(function(t){o.tracker().error({tl:t})}))},function(t,e,r){"use strict";t.exports=function(t,e,r){t=t||window.Jidz;var n={retailName:"fnac",retailPage:"accueil",retailSearch:null,retailShop:null},i=e.pathname.slice(1),o=0===i.indexOf("SearchResult/"),a=t(".js-searchbar-input").val(),c=[],s=t(".f-breadcrumb .f-breadcrumb__item"),u=t(".f-productPage").length>0||(window.tc_vars?window.tc_vars.product_id:null);if(o&&a)n.retailPage="accueil/recherche",n.retailSearch="_"+r.cleanString(a)+"_",n.pageType="search";else if(s.length){if(s.each((function(){var e=t(this).text();e.replace(">",""),c.push(r.cleanString(e))})),n.pageType="shelve",u){var d=t(".f-productPage").data("prid")||(window.tc_vars&&window.tc_vars.product_id?window.tc_vars.product_id:window.FnacAnalytics&&window.FnacAnalytics.product_id?window.FnacAnalytics.product_id:null);c[0]="accueil/fiche_produit",c.pop(),n.productId=d,n.pageType="productpage"}n.retailPage=c.join("/")}else""===i?(n.retailPage="homepage",n.pageType="home"):(n.retailPage=r.cleanString(i),"orderpipe/pop/panier"===n.retailPage&&(n.pageType="checkout"));return window.tc_vars.user_id&&(n.clientId=window.tc_vars.user_id),n}},function(t,e,r){"use strict";(function(e){var n,i,o=e.location,a=e.screen||{availWidth:0,availHeight:0,width:0,height:0},c=e.document,s=r(3)(e.document),u=r(0),d=r(2),l=r(13),f=r(15),p=r(16),h=r(17).trackerFactory,v=r(26),w=r(27),m=r(28),g=r(29),y=r(30),b=r(31),k=r(32),_=r(33);l.update({techWindow:[a.availWidth,a.availHeight].join("x"),techScreen:[a.width,a.height].join("x")});var x={},P={globals:{events:[]},tracker:function(){return h(n.settings.trackerEndPoint,l.copy())},getRegistredCreatives:function(t,e){if(void 0!==t){if(x.hasOwnProperty(t)){if(void 0!==e){if(x[t].hasOwnProperty(e))return x[t][e];throw new Error("Creative ID : "+e+" does not exist with this type : "+t+" in registred creatives object")}return x[t]}throw new Error("Type : "+t+" does not exist in registred creatives object")}return x},getTrackers:function(t,e){var r=this.getRegistredCreatives(t,e),n=[];if(r.hasOwnProperty("tracker"))return r.tracker;for(var i in r)if(r[i].hasOwnProperty("tracker"))n.push({type:t,crea_id:i,tracker:r[i].tracker});else for(var e in r[i])"builder"!==e&&"script"!==e&&n.push({type:i,crea_id:e,tracker:r[i][e].tracker});return n},getRemovers:function(t,e){var r=this.getRegistredCreatives(t,e),n=[];if(r.hasOwnProperty("remover"))return r.remover;for(var i in r)if(r[i].hasOwnProperty("remover"))n.push({type:t,crea_id:i,remover:r[i].remover});else for(var e in r[i])"builder"!==e&&"script"!==e&&n.push({type:i,crea_id:e,remover:r[i][e].remover});return n},getExisting:function(t,e){var r=this.getRegistredCreatives(t,e),n=[];if(r.hasOwnProperty("existing"))return r.existing;for(var i in r)if(r[i].hasOwnProperty("existing"))n.push({type:t,crea_id:i,existing:r[i].existing});else for(var e in r[i])"builder"!==e&&"script"!==e&&n.push({type:i,crea_id:e,existing:r[i][e].existing});return n},getSettings:function(t,e){var r=this.getRegistredCreatives(t,e),n=[];if(r.hasOwnProperty("settings"))return r.settings;for(var i in r)if(r[i].hasOwnProperty("settings"))n.push({type:t,crea_id:i,settings:r[i].settings});else for(var e in r[i])"builder"!==e&&"script"!==e&&n.push({type:i,crea_id:e,settings:r[i][e].settings});return n},getBuilders:function(t){var e=this.getRegistredCreatives(t),r=[];if(e.hasOwnProperty("builder"))return e.builder;for(var t in e)r.push({type:t,builder:e[t].builder});return r},setScriptEndPoint:function(t){n.settings.scriptEndPoint=t},verif:function(t,e){try{s.write("sto__vuid",t,2592e6),e&&s.write("sto__sessionid",e,18e5)}catch(t){this.track({ta:"err",tl:"problem with verif"})}return this},deliv:function(t){var e=this;return u().resolve(t).then((function(t){return t.data&&(e.globals.server_data=t.data),t.unexposed&&d.map(t.unexposed,(function(t,e){h(n.settings.trackerEndPoint,l.copy()).update(t).update({tc:e}).sendHit({ta:"noexp"})})),t.placements})).then((function(t){for(var r in t)Array.isArray(t[r])||(t[r]=new Array(t[r]));for(var r in x)v(x,r);d.map(t,(function(t,r){var i=0,o=!1,a=e.tracker().value("rn")+"_"+r+".js";x[r]={},d.map(t,(function(t){var e=h(n.settings.trackerEndPoint,l.copy()).update(t).update("re",r);x[r][t.tc]={tracker:e,settings:t.values},t.script&&(p(c,t.script).then((function(e){x[r][t.tc].script=e})).then(null,(function(t){e.error({tl:"onCreativeScriptLoad : "+t})})),o=!0),t.values&&t.values.isTest&&i++,e.list()})),o||(x[r].script=null,a=(i>0?n.settings.scriptEndPoint.replace("tpl/","tplpreprod/"):n.settings.scriptEndPoint)+a,p(c,a).then((function(t){x[r].script=t})).then(null,(function(t){e.tracker().error({tl:"onFormatScriptLoad : "+t})})))}))})).then(null,(function(t){P.track({action:"err",event:"onDeliv",label:t})})),this},regen:function(t){var r=f(s,d),i=t||n.retailerContext(e.jQuery,o,d,P.utils);return l=l.dangerouslyUpdate(r).dangerouslyUpdate(i),h(n.settings.trackerEndPoint,l.copy()).load(),this},load:function(t,e){var r="string"!=typeof t,n=r?t[0]:t,i=r?t[1]:null;!!r&&t[2];if(x.hasOwnProperty(n))if(x[n].hasOwnProperty("script")){for(var o in delete x[n].script,x[n])u().resolve(x[n][o]).then((function(t){return e(t.tracker.copy(),t.settings)})).then((function(t){if(!("object"==typeof t&&t.hasOwnProperty("type")&&t.hasOwnProperty("crea_id")&&t.hasOwnProperty("remover")&&t.hasOwnProperty("existing")))throw new Error("loader should return a clean up object");x[t.type][t.crea_id].remover=t.remover,x[t.type][t.crea_id].existing=t.existing})).then(null,(function(t){var e=x[n]&&x[n][o]?x[n][o].tracker:null;e?e.error({tl:"onLoad : "+t}):P.track({action:"err",event:"onLoad",label:t,insertion:n})}));x[n].builder=e}else u().resolve(x[n]).then((function(t){var r;if(i)r=t[i].tracker.copy();else for(var n in t)if("builder"!==n&&"script"!==n&&t[n].hasOwnProperty("tracker")){r=t[n].tracker.copy();break}return{creaType:r.value("re"),creaId:r.value("tc"),loadReturn:e(r,P.utils)}})).then((function(t){if("object"!=typeof t.loadReturn||!t.loadReturn.hasOwnProperty(t.creaType))throw new Error("loader should return a clean up object");x[t.creaType][t.creaId].remover=t.loadReturn[t.creaType]})).then(null,(function(t){var e=x[n]&&x[n][i]?x[n][i].tracker:null;e?e.error({tl:"onLoad : "+t}):P.track({action:"err",event:"onLoad",label:t,insertion:n})}));else P.track({action:"err",event:"onLoad",label:"Unknown type in trackers list : "+n,insertion:n});return this},utils:{addViewTracking:g,activateFallback:m,lazyCrawling:y,cookie:s,deferred:u,fn:d,ga:function(){var t=e.GoogleAnalyticsObject;if("function"==typeof e[t]){var r=d.slice(arguments,0);e[t].apply(e[t],r)}},initGA:k,isValidTracker:b,loadScript:p,readyPromise:w},track:function(t,e){return"object"==typeof e&&"number"==typeof e.length?this.tracker().basket(e,t):this.tracker().sendHit(t),this},forceContext:function(t){l=t}};n={settings:{trackerEndPoint:"//tk.storetail.io/",scriptEndPoint:"//rscdn.storetail.net/tpl/"},retailerContext:{},init:function(){return u().resolve(this).then((function(t){var e=c.getElementById("sto_tag"),r=_(e);return l.update(r),t})).then((function(t){var r,n=typeof t.retailerContext;if("object"===n)r=t.retailerContext;else if("function"===n)try{r=t.retailerContext(e.jQuery,o,d,P.utils)}catch(t){console.log(t)}if(l.update(r),!e.__sto){e.__sto=P;try{i=f(s,d),l.update(i)}catch(t){i={}}finally{l.update(i)}return h(t.settings.trackerEndPoint,l.copy())}try{l.update(e.__sto.tracker().value())}finally{throw new Error("TAG : already loaded")}}))},__sto:P},t.exports=n}).call(this,r(7))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(1).Deferred;t.exports=function(t){if(!("object"==typeof t&&"number"==typeof t.length&&t.length>0))throw new TypeError("Deferred.all: argument must be array-like");for(var e=new Array(t.length),r=new n,i=-1,o=t.length,a=o;++i<o;)!function(t,i){(new n).resolve(t).then((function(t){e[i]=t,--a||r.resolve(e)}),(function(t){r.reject(t)}))}(t[i],i);return r.promise}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t){var e,r,i=new n.Deferred,o=function(t){return function(e){t.resolve(e)}}(i),a=function(t){return function(e){t.reject(e)}}(i);for(e=0,r=t.length;e<r;e+=1)t[e].then(o,a);return i.promise}},function(t,e,r){"use strict";var n=r(1).Deferred;function i(t){var e=new n;this._deferred=e;try{t((function(t){e.resolve(t)}),(function(t){e.reject(t)}))}catch(t){e.reject(t)}}i.prototype.then=function(t,e){return this._deferred.promise.then(t,e)},i.prototype.catch=function(t){return this._deferred.promise.then(t)},t.exports=i},function(t,e,r){!function(e,r){"use strict";t.exports=r}(0,function(){"use strict";var t=[],e=t.slice,r=t.concat,n=function(){if("function"==typeof Object.keys)return function(t){return Object.keys(t)};var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,c=[];for(o in i)t.call(i,o)&&c.push(o);if(e)for(a=0;a<n;a++)t.call(i,r[a])&&c.push(r[a]);return c}}();function i(t){return t}function o(t,e){if("number"!=typeof t)throw new TypeError("function.loop : arguments must be a Number");for(var r="function"==typeof e?e:i,n=-1,o=[];++n<t;)o.push(r(n));return o}function a(t,e){if("object"!=typeof t)throw new TypeError("functions.map : first arg must be an object");var r="function"==typeof e?e:i,a=function(t,e,r){var i;return t?{length:r.length,iteratee:function(t){return e(r[t],t)}}:{length:(i=n(r)).length,iteratee:function(t){return e(r[i[t]],i[t])}}}("number"==typeof t.length,r,t);return o(a.length,a.iteratee)}function c(t,e,r){var n=r,o="function"==typeof e?e:i;return a(t,(function(t,e){n=o(n,t,e)})),n}function s(t,r,n){return e.call(t,r,n)}return{loop:o,map:a,reduce:c,slice:s,concat:function(t){var e=s(arguments,1);return r.apply(t,e)},filter:function(t,e){var r="function"==typeof e?e:i;return c(t,(function(t,e,n){return r(e,n)&&t.push(e),t}),[])},keys:n,identity:i}}())},function(t,e,r){!function(e,r){"use strict";t.exports=r}(0,function(){function t(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return{trim:t,cleanString:function(e,r){try{var n,i,o,a=[/[\.,]/g,""],c=[/[^a-z0-9\/]/g,"_"];for(r&&(a=[/[\.,]+/g,"."],c=[/[^a-z0-9.]/g,"_"]),i=-1,o=(n=[[/[éèëê]/g,"e"],[/[àáâãäå]/g,"a"],[/[ìíîï]/g,"i"],[/[òóôõö]/g,"o"],[/[ùúûü]/g,"u"],[/ß/g,"ss"],[/ñ/g,"n"],[/ç/g,"c"],[/æ/g,"ae"],[/œ/g,"oe"],a,[/[-_]/g," "],[/\n\r\t/g," "],[/\s+/g," "],c,[/_+/g,"_"],[/_$/,""],[/\/$/,""]]).length,e=t(e=e.toLowerCase());++i<o;)e=e.replace(n[i][0],n[i][1]);return e}catch(t){console.log("cleanString error: "+t)}}}}())},function(t,e,r){"use strict";var n=r(2),i=r(14),o=n.reduce(i,(function(t,e,r){if(t[r])throw new Error("Duplicate key in alias");return t[r]=r,n.reduce(e,(function(t,e){return t[e]=r,t}),t)}),{});function a(){this._value=n.reduce(i,(function(t,e,r){return t[r]=null,t}),{})}function c(t,e,r){var n=o[r];return n&&null===t[n]&&(t[n]=e),t}function s(t,e,r){return null!==e&&(t[r]=e),t}a.prototype={dangerouslyUpdate:function(t){var e;for(e in t)this._value[o[e]]=t[e];return this},update:function(t,e){return"object"==typeof t?n.reduce(t,c,this._value):"string"==typeof t&&c(this._value,e,t),this},copy:function(){return(new a).update(this._value)},value:function(t){return o[t]?this._value[o[t]]:n.reduce(this._value,s,{})},toString:function(){var t=this._value;return n.reduce(i,(function(e,r,n){return null!==t[n]&&e.push(n+"="+t[n]),e}),[]).join("&")},alias:function(t){var e=o[t];if(!t||!e)throw new Error("Bad key");return e}},t.exports=new a},function(t){t.exports=JSON.parse('{"lt":["latitude","forceLatitude"],"fc":["forceCity","city"],"lg":["longitude","forceLongitude"],"ut":["sessionTime"],"up":["sessionPages"],"uc":["userCookies"],"ts":["techScreen"],"tw":["techWindow"],"rn":["retailName"],"rs":["retailShop"],"rp":["retailPage","fp"],"rk":["retailSearch"],"re":["retailPlacements"],"tf":["trackFrom"],"tb":["trackBrand","brand"],"to":["trackOperation","operation"],"ti":["trackInsertion","insertion"],"tc":["trackCreative","creative"],"tt":["trackTime","time"],"tv":["trackVisibility","visibility"],"tg":["trackGoal","goal"],"tp":["trackGoalStep","goalStep"],"tn":["trackValue","value"],"tl":["trackLabel","label"],"ta":["trackAction","action"],"vf":["trackUid","uid"],"vs":["trackSessionid","sessionId"],"te":["trackEvent","event"],"tz":["trackZone","zone"],"fo":["forceOperation"],"pl":["productLabel"],"blk":["block"],"ci":["clientId"],"pk":["paymentKey"],"pi":["productId"],"po":["trackPosition"],"ap":["trackAvailProducts"],"pt":["pageType"],"lid":["trackLosers"],"in":["trackConsent"]}')},function(t,e,r){!function(){"use strict";t.exports=function(t,e){var r=window.document.referrer,n=window.location.hash,i=null;if(n.length>0?i=n:r.length>0&&(i=r.split("://")[1].split("/")[0].split(".").join("_")),i="string"==typeof i?e.cleanString(i):null,!t.enabled)return{sessionTime:null,sessionPages:null,userCookies:0,trackFrom:i};var o=new Date,a="sto__session",c="sto__count",s={userCookies:1,sessionPages:null,sessionTime:null,trackFrom:i},u=t.read(a);u=parseInt(u,10);var d=(new Date).setTime(u);if(isNaN(d)||o.getTime()-d>1728e5)t.write(a,o.getTime(),18e5),t.write(c,"0",18e5),s.sessionPages=0,s.sessionTime=0;else{var l=t.read(c);l=parseInt(l,10),isNaN(l)?s.sessionPages=0:s.sessionPages=l+1,s.sessionTime=o.getTime()-u,t.write(c,s.sessionPages,18e5),t.write(a,u,18e5)}return s}}()},function(t,e,r){"use strict";var n=r(0);t.exports=function(t,e){var r=t.createElement("SCRIPT"),i=n(),o=-1===e.indexOf(".js?")?"?"+(new Date).getTime():"";return r.src=e+o,r.type="text/javascript",r.charset="utf-8",r.crossOrigin="anonymous",r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,i.resolve(r))}:(r.onload=function(){i.resolve(r)},r.onerror=function(){i.reject()}),t.getElementsByTagName("HEAD")[0].appendChild(r),i.promise}},function(t,e,r){"use strict";var n=r(2),i=r(3)(window.document),o=r(18),a=r(19),c=r(20),s=r(21),u=r(22),d=r(24),l=(new Date).getTime(),f=r(25);function p(t,e){this.endPoint=t,this.context=e}function h(t){var e="object"==typeof t?t:{};return e.trackTime=(new Date).getTime()-l,e.trackUid=i.read("sto__vuid"),e.trackSessionid=i.read("sto__sessionid"),e}var v={sendHit:function(t){var e=h(t),r=this.context.copy().update(e),n=r.toString();return window.__sto.globals.events.push({data:r.value()}),"imp"===r.value("ta")&&window.__sto.utils.retailerMethod&&window.__sto.utils.retailerMethod.customTracking&&window.__sto.utils.retailerMethod.customTracking(r),n+="&n=degh48.fnac.com",a(this.endPoint,n),f(r.value()),this},addToBasket:function(t,e,r,i){var o,a,c,s,l="object"==typeof t&&"number"==typeof t.length,p=null!==e&&"object"==typeof e?e:{};if("buy"===i?p.trackAction="buy":(p.trackAction="abk",p.trackEvent=i||"abk-btn"),p=h(p),s=this.context.copy().update(p),!l)throw new TypeError("tracker.basket : basketItems arg must be an Array like object");return o=n.reduce(t,(function(t,e){return"number"!=typeof e.price||"number"!=typeof e.qty||isNaN(e.qty)||isNaN(e.price)||(t.totalValue+=e.price*e.qty),t.items.push(e),t}),{totalValue:0,items:[]}),window.__sto.globals.events.push({data:s.value(),basket:o}),a=s.toString(),c=u(o,r),d(this.endPoint,a,c),f(s.value(),t),this},addAllToBasket:function(t,e,r){this.addToBasket(t,e,r,"abk-btn-all")},removeAllToBasket:function(t,e,r){this.addToBasket(t,e,r,"abk-btn-clear")},quantityMore:function(t,e,r){this.addToBasket(t,e,r,"qty-more")},quantityLess:function(t,e,r){this.addToBasket(t,e,r,"qty-less")},quantityChange:function(t,e,r){this.addToBasket(t,e,r,"qty-chge")},buy:function(t,e,r){this.addToBasket(t,e,r,"buy")},value:function(t){return this.context.value(t)},update:function(t,e){return this.context.update(t,e),this},copy:function(){return new p(this.endPoint,this.context.copy())},debug:function(){var t=this.context.copy().toString();c(this.endPoint,t)},getDebug:function(){var t=this.context.copy().toString();return s(this.endPoint,t)}};function w(t,e){if(e.hasOwnProperty(t))try{var r=this.context.alias(t),n=e[t];delete e[t],e[r]=n}catch(t){this.sendHit({ta:"err",tl:t})}}v=n.reduce(o,(function(t,e,r){return t[r]=function(t){var r="object"==typeof t?t:{};for(var n in r)w.call(this,n,r);for(var i in e)r[i]=e[i];return this.sendHit(r)},t}),v),n.map(v,(function(t,e){p.prototype[e]=t})),t.exports={trackerFactory:function(t,e){return new p(t,e)},trackerConstructor:p}},function(t){t.exports=JSON.parse('{"load":{"ta":"lod"},"list":{"ta":"list"},"display":{"ta":"imp"},"click":{"ta":"clk","te":"cta"},"action":{"ta":"act"},"event":{"ta":"evt"},"view":{"ta":"view"},"noexp":{"ta":"noexp"},"error":{"ta":"error"},"availability":{"ta":"avail"},"basketAmount":{"ta":"bsk","te":"bsk-amount"},"open":{"ta":"act","te":"open"},"close":{"ta":"act","te":"close"},"browse":{"ta":"act","te":"browse-pdct"},"moreInfo":{"ta":"act","te":"open-pdp"},"scrollSkin":{"ta":"act","te":"scroll-skin"},"addToList":{"ta":"act","te":"add-list"},"addToCart":{"ta":"abp"},"openPDF":{"ta":"act","te":"dwnld-pdf"},"openLink":{"ta":"act","te":"link"},"playVideo":{"ta":"act","te":"video-play"},"completedVideo":{"ta":"act","te":"video-full"},"closeVideo":{"ta":"act","te":"video-close"},"expand":{"ta":"act","te":"expand"},"clickCategory":{"ta":"act","te":"link","tl":"pdct-cat"},"clickBrand":{"ta":"act","te":"link","tl":"pdct-brand"},"clickMarketPlace":{"ta":"act","te":"link","tl":"pdct-mpvdr"},"chooseStore":{"ta":"act","te":"link","tl":"pdct-storechsr"},"checkAvailability":{"ta":"act","te":"link","tl":"pdct-chkavail"},"openMiniBsk":{"ta":"act","te":"open-minibsk"},"openMenu":{"ta":"act","te":"open-menu"}}')},function(t,e,r){"use strict";var n=window.document;t.exports=function(t,e){var r=n.createElement("SCRIPT");return r.src=t+"js?"+e,r.type="text/javascript",n.getElementsByTagName("head")[0].appendChild(r),r}},function(t,e,r){"use strict";var n=window.document;t.exports=function(t,e){var r=n.createElement("iframe"),i=n.body;r.src=t+"/js?debug=1&ta=lod&"+e,r.setAttribute("style","width: 80%; height: 80%; position: fixed; background-color: white; z-index: 500000; top: 0; left: 0"),i.appendChild(r),i.addEventListener("click",(function t(){i.removeChild(r),i.removeEventListener("click",t)}))}},function(t,e,r){var n=r(0);t.exports=function(t,e){var r=t+"x?debug=1&ta=lod&"+e,i=n(),o=new window.XMLHttpRequest;return o.open("GET",r),o.onload=function(){i.resolve(o.responseText)},o.onerror=function(){i.reject()},o.send(),i.promise}},function(t,e,r){"use strict";var n=r(2),i=r(23);t.exports=function(t,e){var r,o="";return t.items&&t.items.length>0?o+="<itms>"+(r=t.items,n.reduce(r,(function(t,e){var r="";return r+=i.id[0]+e.id+i.id[1],r+=i.name[0]+n.cleanString(e.name,!0)+i.name[1],r+=i.promo[0]+(e.promo?"Y":"N")+i.promo[1],r+=i.qty[0]+("number"!=typeof e.qty||isNaN(e.qty)?0:e.qty)+i.qty[1],t+="<li>"+(r+=i.price[0]+("number"!=typeof e.price||isNaN(e.price)?0:e.price).toFixed(2)+i.price[1])+"</li>"}),"")+"</itms>"):o+="<itms></itms>",o+="<tv>"+t.totalValue.toFixed(2)+"</tv>",void 0!==e&&(o+="<id>"+e+"</id>"),"<bsk>"+o+"</bsk>"}},function(t){t.exports=JSON.parse('{"id":["<id>","</id>"],"name":["<name>","</name>"],"promo":["<promo>","</promo>"],"qty":["<qty>","</qty>"],"price":["<price>","</price>"]}')},function(t,e,r){"use strict";var n="object"==typeof n&&n.document&&n.window?n:window,i=n.document;t.exports=function(t,e,r){var n=t+"fo?",o=(new Date).getTime(),a="<form target='"+o+"' action='"+n+(e||"")+"' method='post' style='display: none;'><input name='bk' value='"+r+"'></form>",c="<iframe id='"+o+"' name='"+o+"' style='display: none;'></iframe>",s=i.createElement("DIV");s.innerHTML=a+c,i.getElementsByTagName("body")[0].appendChild(s),s.firstChild.submit()}},function(t,e,r){"use strict";function n(t,e){var r,n,i=[],o=[];r="erms_"+(t.to||"NoCampaign"),i.push(t.ta),t.te&&i.push(t.te),t.tz&&o.push(t.tz),t.tl&&o.push(t.tl),t.tg&&o.push(t.tg),t.tp&&o.push(t.tp),e?(o.push(e[0].id),n=parseInt(100*e[0].price,10)):t.tn&&(n=parseInt(t.tn)),i=i.join("_"),o=o.join("_"),"function"==typeof window.ga&&window.ga("sto_tracker.send","event",r,i,o||i,n)}t.exports=n,t.exports=n},function(t,e,r){"use strict";t.exports=function(t,e,r){try{if(t[e]||window.__sto.tracker().error({tl:"onRemove: "+e+" type not registred"}),r)t[e][r]||window.__sto.tracker().error({tl:"onRemove: "+e+"-"+r+" creaID not registred"}),"function"!=typeof t[e][r].remover&&t[e][r].tracker.error({tl:"onRemove: remover_function_not_existing"}),t[e][r].remover(),t[e][r].hasOwnProperty("script")&&t[e][r].script&&t[e][r].script.parentNode&&t[e][r].script.parentNode.removeChild(t[e][r].script),delete t[e][r];else{for(var n in t[e])"builder"!==n&&"script"!==n&&("function"!=typeof t[e][n].remover&&t[e][r].tracker.error({tl:"onRemove: remover_function_not_existing"}),t[e][n].remover(),t[e][n].hasOwnProperty("script")&&t[e][n].script&&t[e][n].script.parentNode&&t[e][n].script.parentNode.removeChild(t[e][n].script));t[e].hasOwnProperty("script")&&t[e].script&&t[e].script.parentNode&&t[e].script.parentNode.removeChild(t[e].script),delete t[e]}}catch(t){t=t.message||t,window.__sto.tracker().error({tl:"onRemove: "+t})}}},function(t,e,r){"use strict";var n=r(0);t.exports=function(){var t=n();return void 0!==window.jQuery?window.jQuery((function(){t.resolve()})):"complete"===document.readyState?t.resolve():document.addEventListener("DOMContentLoaded",(function(){t.resolve()})),t.promise}},function(t,e,r){"use strict";t.exports=function(t){t=t||1e3,window.setTimeout((function(){var t=window.__sto;if(t&&void 0===t.globals.server_data){var e,r,n=window.document.getElementById("sto_fallback"),i={placements:{}};null!==n&&(e=n.getAttribute("data-format"),r=n.getAttribute("data-url"),i.placements[e]={script:r},t.deliv(i),t.deliv=function(){t.track({ta:"err",tl:"Fallback on"})})}}),t)}},function(t,e,r){"use strict";t.exports=function(t,e,r){var n,i;i=function(t){"function"==typeof window.jQuery&&t instanceof window.jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&!(e.top==e.bottom||e.left==e.right)&&!(0==e.height||0==e.width)&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},n=window.setInterval((function(){i(t)&&(e.view(),r&&"function"==typeof r&&r(),window.clearInterval(n))}),200)}},function(t,e,r){var n=r(0);t.exports=function(t){var e,r,i=n();return r=t,"function"==typeof window.jQuery&&r instanceof window.jQuery&&(r=r[0]),("object"==typeof HTMLElement?r instanceof HTMLElement:r&&"object"==typeof r&&null!==r&&1===r.nodeType&&"string"==typeof r.nodeName)?(e=window.setInterval((function(){(function(t){"function"==typeof window.jQuery&&t instanceof window.jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)})(t)&&(i.resolve(),window.clearInterval(e))}),200),i.promise):(i.resolve("No reference element for lazyCrawling"),i.promise)}},function(t,e){t.exports=function(t){return!(!window||!window.__sto)&&t.value("up")===window.__sto.tracker().value("up")}},function(t,e,r){"use strict";t.exports=function(t,e,r){var n,i;e=e||{name:"sto_tracker",cookieExpires:31104e3},!window.ga&&r&&(window.ga=function(){window.ga.q=[],window.ga.q.push(arguments)},window.ga.l=(new Date).getTime(),n=window.document.createElement("script"),i=window.document.getElementsByTagName("script")[0],n.async=1,n.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(n,i)),window.ga&&(window.ga("create",t,e),window.ga("sto_tracker.send","pageview"))}},function(t,e,r){"use strict";t.exports=function(t){var e,r,n={};return null!==t&&void 0!==(e=t.src.split("?")[1])&&e.split("#").forEach((function(t){r=t.split("="),n[r[0]]=void 0===r[1]?"":r[1]})),n}},function(t,e,r){var n=r(35),i=r(36),o=r(37),a=r(38);t.exports={crawl:n,crawlAPI:i,createFormat:o,genSearchUrl:a}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t){var e=window.jQuery,r=n(),i=!!(window.Fnac&&window.Fnac.config&&window.Fnac.config.isMobile)&&window.Fnac.config.isMobile;return e.ajax({url:t,success:function(t){var n={};i?e(t).find("article.mini-FA").each((function(){var t=e(this),r=t.find(".js-ProductBuy-add");if(0!==r.length){var i=r.data("tracking-catalogid"),o=r.attr("fnacidoffre"),a=r.data("prid"),c=parseFloat(t.find(".price").text()?t.find(".price").first().text().match(/\d+/g).join("."):0),s=t.find(".oldPrice, .thumbnail-priceOld").length>0,u=window.__sto.utils.fn.cleanString(t.find(".info-article .title").text());n[a]={bloc:t,productId:a,price:c,name:u,promo:s,catalog:i,offer:o}}})):e(t).find(".Article-item, .Article-mosaicItem").each((function(){var t=e(this),r=t.find(".js-ProductBuy"),i=r.find(".js-ProductBuy-add");if(!(0===i.length||i.data("prid")&&0==i.data("prid").indexOf("MP"))){var o=r.attr("data-catalog-id"),a=t.find("[data-offer-id]").attr("data-offer-id")||t.find("[data-offerid]").attr("data-offerid"),c=r.attr("data-product-id"),s=parseFloat(t.find(".userPrice, .thumbnail-price, .blocPriceBorder--bgGrey .price").first().text().replace("€",".")),u=t.find(".oldPrice, .thumbnail-priceOld").length>0,d=window.__sto.utils.fn.cleanString(t.find(".Article-desc a").first().text());n[c]={bloc:t,productId:c,price:s,name:d,promo:u,catalog:o,offer:a}}})),r.resolve(n)},error:function(t){r.reject(t)}}),r}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t,e,r){var i=window.jQuery,o=n();return e=e||"list",t=t.map((function(t){return"1-"+t})),i.ajax({url:"/api/search/v1/suggestions",data:{references:t.join(";"),trackingzone:window.FnacAnalytics&&window.FnacAnalytics.page_name||"FA:PEM:Fiche_Article",searchType:e},success:function(t){var r=t.match(/^[^\s]+/)[0],n={},a=r+"(?:--)?";t=t.replace(new RegExp(a,"g"),""),i("<div></div>").append(i(t)).find(".thumbnail, .Article-itemGroup").each((function(){var t="list"===e?i('<div class="clearfix Article-item"></div>').append(i(this)):i('<div class="Article-mosaicItem itemosaic"></div>').append(i(this)),r=t.find(".js-ProductBuy"),o=r.find(".js-ProductBuy-add");if(!(t.find(".Seller-item .Nodispo").length>0||o.attr("data-prid")&&0==o.attr("data-prid").indexOf("MP")||t.find(".thumbnail-seller-name, .Mp-item, .Mp-seller").length>0)){var a=r.attr("data-catalog")||r.attr("data-catalog-id"),c=t.find("[data-tracking-offerid]").attr("data-tracking-offerid")||t.find("[data-offer-id]").attr("data-offer-id")||t.find("[data-offerid]").attr("data-offerid"),s=t.find("[data-prid]").attr("data-prid")||r.attr("data-product-id"),u=o.attr("data-tracking-price-discount")||o.attr("data-tracking-price")||o.attr("data-tracking-price-mp"),d=t.find(".oldPrice, .thumbnail-priceOld").length>0,l=window.__sto.utils.fn.cleanString(t.find(".Article-desc a, .thumbnail-desc a").first().text());n[s]={bloc:t,productId:s,price:u?parseFloat(u.replace(",",".")):0,name:l,promo:d,catalog:a,offer:c}}})),o.resolve(n)},error:function(t){o.reject(t)}}),o}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i,o,a){i=i||5;var c=0,s=r.filter((function(t){return n.hasOwnProperty(t)})).slice(0,i),u=s.length,d=!o||u>=o,l=window.jQuery||window.Jidz,f=window.Fnac&&window.Fnac.Views&&window.Fnac.Views.ProductBuyView?new window.Fnac.Views.ProductBuyView:null;if(!0!==__sto.globals.hasBeenRegen&&e.availability({tn:u,tl:!d||a?"nodisplay":null}),0===u||!d||a)throw new Error("No products");function p(t,e){return(t%e+e)%e}function h(){var e,r;e=p(c-1,u),r=p(c+1,u),t.find(".sto-arrow-left").attr("data-id",s[e]),t.find(".sto-arrow-right").attr("data-id",s[r]),t.find(".sto-product-center").attr("data-id",s[c]),t.find(".sto-item-product").hide().eq(c).show()}return 1===u&&t.find(".sto-arrow-left,.sto-arrow-right").hide(),t.attr("data-count",u),s.forEach((function(e){var r=n[e].bloc.clone();r.attr("data-id",e),r.addClass("sto-item-product");var i=r.find(".js-ProductBuy"),o=r.find(".js-ProductBuy-add");i&&o&&(o.attr("data-product-id",e),o.attr("data-prid",e),o.attr("data-catalog-id",n[e].catalog),o.attr("data-offer-id",n[e].offer)),t.find(".sto-product-container").append(r)})),function(t){var e=t.find(".js-ProductThumbnail");if(e.length&&window.Fnac&&window.Fnac.Views&&window.Fnac.Views.ProductThumbnailView){var r=l("#wishlistThumbnailBaseTemplate").html(),n=l("#wishlistThumbnailTemplate").html();e.each((function(){new Fnac.Views.ProductThumbnailView({el:this,wishlistBaseTemplate:r,wishlistTemplate:n})}))}}(t),t.on("click",".Article-itemVisual",(function(){l(this).find("img").attr("data-hyperlink")&&(window.location=l(this).find("img").attr("data-hyperlink"))})),__sto.getRegistredCreatives(e.value("re"),e.value("tc"))&&null==__sto.getRegistredCreatives(e.value("re"),e.value("tc")).settings&&!0!==__sto.globals.hasBeenRegen&&e.display(),t.on("click",".sto-arrow-left",(function(){c=p(c-1,u),e.browse(),h()})),t.on("click",".sto-arrow-right",(function(){c=p(c+1,u),e.browse(),h()})),t.on("click",".block-Search-wishlist, .thumbnail-btn i",(function(){e.addToList({tl:s[c],pi:s[c]})})),window.Fnac&&window.Fnac.config&&window.Fnac.config.isMobile&&t.on("vclick",".js-ProductBuy-add",(function(t){var r=l(this).closest(".Article-item, .Article-mosaicItem").attr("data-product-id")||l(this).data("prid"),i=n[r];e.addToBasket([{id:r,qty:1,promo:i.promo,name:i.name,price:i.price}])})),t.on("click",".js-ProductBuy-add",(function(t){f&&(t.stopPropagation(),t.preventDefault());var r=l(this).closest(".sto-item-product").attr("data-id"),i=n[r];f&&f.addBehavior({productId:r,offerId:i.offer,catalogId:i.catalog}),e.addToBasket([{id:r,qty:1,promo:i.promo,name:i.name,price:i.price}])})),t.on("click",".Article-desc a, .Article-itemVisual, .thumbnail-titleLink",(function(t){var r=l(this).closest(".sto-item-product").attr("data-id");e.moreInfo({tl:r,pi:r})})),t.on("click",".searchFA",(function(t){var r=l(this).closest(".mini-FA").find(".js-ProductBuy-add").data("prid");e.moreInfo({tl:r,pi:r})})),h(),!0!==__sto.globals.hasBeenRegen&&window.__sto.utils.addViewTracking(t,e),{container:t,products:s,addAllProducts:function(){var r=[],i=[];t.find("[class*='modalbox-products'] .sto-item-product").each((function(){var t=l(this).attr("data-id"),e=n[t].offer,o=n[t].catalog;r.push({productId:t,offerId:e,catalogId:o}),i.push({id:t,qty:1,promo:n[t].promo,name:n[t].name,price:n[t].price})})),f.basketAdd(r),e.addAllToBasket(i)},changeState:function(t){var e=s.indexOf(t);if(-1===e)throw new Error(t+"is not in the products");c=p(e,u),h()}}}},function(t,e,r){"use strict";t.exports=function(t){return"string"!=typeof t&&(t=t.join("+")),"//recherche.fnac.com/SearchResult/ResultList.aspx?SCat=0%211&Search="+t+"&sft=1&sa=0"}}]);